import{S as se,i as ae,s as ie,k as d,q as B,a as O,l as f,m as _,r as L,h,c as P,n,b as re,D as r,V as R,M as z,a4 as ne,H as x,R as oe,T as le,o as ue}from"./index.e3dc2061.js";import{w as ce}from"./index.5a2fedc7.js";var ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function de(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var U={exports:{}},te;function fe(){return te||(te=1,function(o,e){var t=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof ee<"u")return ee;throw new Error("unable to locate global object")},s=t();o.exports=e=s.fetch,s.fetch&&(e.default=s.fetch.bind(s)),e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response}(U,U.exports)),U.exports}let H;typeof window<"u"?H=window.fetch:H=fe();class he{constructor(e,t){this._redirect_in_unauthorized_internal=t,this._basic_authentication={},this._url=e,this._defaultHeaders=new Map}SetBasicAuthentication(e,t){return e&&t?this._basic_authentication="Basic "+Buffer.from(e+":"+t).toString("base64"):this._basic_authentication=void 0,this}_addBasicAuthentication(e){return this._basic_authentication&&(e.Authorization=this._basic_authentication),e}addHeader(e,t){this._defaultHeaders.set(e,t)}async request(e,t,s,l){let a,i=t?t.toUpperCase():"GET",c=e&&e.length>0?e:this._url;if(!(i=="GET"||i=="POST"||i=="HEAD"||i=="PUT"||i=="DELETE"||i=="CONNECT"||i=="OPTIONS"||i=="TRACE"||i=="PATCH"))throw"Invalid method";l||(l={"Content-Type":"application/json"}),l=this._addBasicAuthentication(l);for(const[p,g]of this._defaultHeaders)l[p]=g;try{switch(i){case"POST":a=await H(c,{method:i,body:JSON.stringify(s),headers:l});break;case"PUT":a=await H(c,{method:i,body:JSON.stringify(s),headers:l});break;default:let p=new URLSearchParams(s);c=c+"?"+p.toString(),a=await H(c,{method:i,headers:l});break}return this._redirect_in_unauthorized&&a.status==401&&(window.location.href=this._redirect_in_unauthorized),a}catch(p){if(console.log(p),a)return a;throw p}}async put(e,t,s){return this.request(e,"PUT",t,s)}async delete(e,t,s){return this.request(e,"DELETE",t,s)}async post(e,t,s){return this.request(e,"POST",t,s)}async get(e,t,s){return this.request(e,"GET",t,s)}async patch(e,t,s){return this.request(e,"PATCH",t,s)}}var pe=he;const _e=de(pe),ve=ce("");function be(o){let e,t,s,l,a,i,c,p,g,y,u,w,E,I,V,j,S,v,k,q,D,T,G,M,F;return{c(){e=d("div"),t=d("h1"),s=B("Iniciar sesión"),l=O(),a=d("form"),i=d("div"),c=d("label"),p=B("Nombre de usuario"),g=O(),y=d("div"),u=d("input"),w=O(),E=d("div"),I=d("label"),V=B("Contraseña"),j=O(),S=d("div"),v=d("input"),k=O(),q=d("div"),D=d("div"),T=d("button"),G=B("Iniciar sesión"),this.h()},l(b){e=f(b,"DIV",{class:!0});var m=_(e);t=f(m,"H1",{class:!0});var $=_(t);s=L($,"Iniciar sesión"),$.forEach(h),l=P(m),a=f(m,"FORM",{class:!0});var C=_(a);i=f(C,"DIV",{class:!0});var N=_(i);c=f(N,"LABEL",{class:!0});var J=_(c);p=L(J,"Nombre de usuario"),J.forEach(h),g=P(N),y=f(N,"DIV",{class:!0});var K=_(y);u=f(K,"INPUT",{class:!0,type:!0,placeholder:!0}),K.forEach(h),N.forEach(h),w=P(C),E=f(C,"DIV",{class:!0});var A=_(E);I=f(A,"LABEL",{class:!0});var Q=_(I);V=L(Q,"Contraseña"),Q.forEach(h),j=P(A),S=f(A,"DIV",{class:!0});var W=_(S);v=f(W,"INPUT",{class:!0,type:!0,placeholder:!0}),W.forEach(h),A.forEach(h),k=P(C),q=f(C,"DIV",{class:!0});var X=_(q);D=f(X,"DIV",{class:!0});var Y=_(D);T=f(Y,"BUTTON",{class:!0,type:!0});var Z=_(T);G=L(Z,"Iniciar sesión"),Z.forEach(h),Y.forEach(h),X.forEach(h),C.forEach(h),m.forEach(h),this.h()},h(){n(t,"class","title is-4"),n(c,"class","label"),n(u,"class","input"),n(u,"type","text"),n(u,"placeholder","Nombre de usuario"),u.required=!0,n(y,"class","control"),n(i,"class","field"),n(I,"class","label"),n(v,"class","input"),n(v,"type","password"),n(v,"placeholder","Contraseña"),v.required=!0,n(S,"class","control"),n(E,"class","field"),n(T,"class","button is-primary"),n(T,"type","submit"),n(D,"class","control"),n(q,"class","field"),n(a,"class","form svelte-osrx57"),n(e,"class","container svelte-osrx57")},m(b,m){re(b,e,m),r(e,t),r(t,s),r(e,l),r(e,a),r(a,i),r(i,c),r(c,p),r(i,g),r(i,y),r(y,u),R(u,o[0]),r(a,w),r(a,E),r(E,I),r(I,V),r(E,j),r(E,S),r(S,v),R(v,o[1]),r(a,k),r(a,q),r(q,D),r(D,T),r(T,G),M||(F=[z(u,"input",o[3]),z(v,"input",o[4]),z(a,"submit",ne(o[2]))],M=!0)},p(b,[m]){m&1&&u.value!==b[0]&&R(u,b[0]),m&2&&v.value!==b[1]&&R(v,b[1])},i:x,o:x,d(b){b&&h(e),M=!1,oe(F)}}}function me(o,e,t){const s=le();let l="",a="",i=new _e;function c(u){s("login",{login:u})}async function p(){try{let w=await(await i.post("/api/login",{username:l,password:a})).json();console.log(w),w.login?ve.set(w.token):alert("Credenciales inválidas"),c(w.login)}catch(u){console.trace(u),alert(u.message)}}ue(()=>{});function g(){l=this.value,t(0,l)}function y(){a=this.value,t(1,a)}return[l,a,p,g,y]}class Ee extends se{constructor(e){super(),ae(this,e,me,be,ie,{})}}export{Ee as L,ve as t,_e as u};
