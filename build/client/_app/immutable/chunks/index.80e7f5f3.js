import{s as W,f as c,a as L,g as f,h as H,B as z,c as j,d as S,j as l,i as X,u,L as D,E as U,U as Y,y as Q,C as Z,J as ee,o as te}from"./scheduler.5b4a082c.js";import{S as se,i as ae}from"./index.4e0d903b.js";import{w as C}from"./index.745f0d7f.js";var $=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ne(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var F={exports:{}},K;function ie(){return K||(K=1,function(r,e){var t=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof $<"u")return $;throw new Error("unable to locate global object")},s=t();r.exports=e=s.fetch,s.fetch&&(e.default=s.fetch.bind(s)),e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response}(F,F.exports)),F.exports}let q;typeof window<"u"?q=window.fetch:q=ie();class re{constructor(e=void 0,t=void 0){this._redirect_in_unauthorized_internal=t,this._basic_authentication={},this._bearer_authentication,this._url=e,this._defaultHeaders=new Map}SetBasicAuthentication(e,t){return e&&t?this._basic_authentication="Basic "+Buffer.from(e+":"+t).toString("base64"):this._basic_authentication=void 0,this}setBasicAuthorization(e,t){return e&&t?this._basic_authentication="Basic "+Buffer.from(e+":"+t).toString("base64"):this._basic_authentication=void 0,this}setBearerAuthorization(e){return e?this._bearer_authentication="Bearer "+e:this._bearer_authentication=void 0,this}_addAuthorizationHeader(e){return this._basic_authentication&&(e.Authorization=this._basic_authentication),this._bearer_authentication&&(e.Authorization=this._bearer_authentication),e}addHeader(e,t){this._defaultHeaders.set(e,t)}async request(e,t,s,n){let a,i=t?t.toUpperCase():"GET",d=e&&e.length>0?e:this._url;if(!(i=="GET"||i=="POST"||i=="HEAD"||i=="PUT"||i=="DELETE"||i=="CONNECT"||i=="OPTIONS"||i=="TRACE"||i=="PATCH"))throw"Invalid method";n||(n={"Content-Type":"application/json"}),n=this._addAuthorizationHeader(n);for(const[h,w]of this._defaultHeaders)n[h]=w;try{switch(i){case"POST":a=await q(d,{method:i,body:JSON.stringify(s),headers:n});break;case"PUT":a=await q(d,{method:i,body:JSON.stringify(s),headers:n});break;default:let h=new URLSearchParams(s);d=d+"?"+h.toString(),a=await q(d,{method:i,headers:n});break}return this._redirect_in_unauthorized&&a.status==401&&(window.location.href=this._redirect_in_unauthorized),a}catch(h){if(console.log(h),a)return a;throw h}}async put(e=void 0,t=void 0,s=void 0){return this.request(e,"PUT",t,s)}async delete(e=void 0,t=void 0,s=void 0){return this.request(e,"DELETE",t,s)}async post(e=void 0,t=void 0,s=void 0){return this.request(e,"POST",t,s)}async get(e=void 0,t=void 0,s=void 0){return this.request(e,"GET",t,s)}async patch(e=void 0,t=void 0,s=void 0){return this.request(e,"PATCH",t,s)}}var oe=re;const I=ne(oe),B={getfunctions:"/api/system/prd/functions",getHandler:"/api/system/prd/system/handler/0.01",Methods:"/api/system/prd/system/method/0.01",listEnv:"/api/system/prd/system/environment/0.01",listApps:"/api/system/prd/api/apps/0.01",getApp:"/api/system/prd/api/app/0.01",saveApp:"/api/system/prd/api/app/0.01",saveMethod:"/api/system/prd/system/method/0.01"},le=C({}),ue=C({}),de=C({}),ce=C({}),fe=C({}),he=C({}),ge=C({}),Ae=r=>JSON.stringify(r,null,2).replace(/\n/g,"<br/>").replace(/ /g,"&nbsp;"),Se=async(r,e)=>{let t=new I;t.setBearerAuthorization(r);try{let n=await(await t.get(B.getfunctions,{appName:e,environment:"dev"})).json();if(n&&Array.isArray(n)){let a=n.map(i=>({id:i,value:i}));ce.set(a)}}catch(s){console.error(s)}try{let n=await(await t.get(B.getfunctions,{appName:e,environment:"qa"})).json();if(n&&Array.isArray(n)){let a=n.map(i=>({id:i,value:i}));fe.set(a)}}catch(s){console.error(s)}try{let n=await(await t.get(B.getfunctions,{appName:e,environment:"prd"})).json();if(n&&Array.isArray(n)){let a=n.map(i=>({id:i,value:i}));he.set(a)}}catch(s){console.error(s)}},pe=async r=>{let e=new I;e.setBearerAuthorization(r);try{let s=await(await e.get(B.getHandler)).json();if(s&&Array.isArray(s)){let n=s.map(a=>({id:a.handler,value:a.label,enabled:a.enabled,description:a.description}));de.set(n)}}catch(t){console.error(t)}},_e=async r=>{let e=new I;e.setBearerAuthorization(r);try{let s=await(await e.get(B.Methods)).json();if(s&&Array.isArray(s)){let n=s.map(a=>({id:a.method,value:a.label,enabled:a.enabled,description:""}));ue.set(n)}}catch(t){console.error(t)}},Ce={FETCH:{css:" is-primary is-outlined ",label:" Fetch ",icon:" fa-solid fa-server "},JS:{css:" is-link is-outlined ",label:" Javascript ",icon:" fa-brands fa-square-js "},SOAP:{css:" is-danger is-outlined ",label:" SOAP ",icon:" fa-solid fa-soap "},SQL:{css:" is-info is-outlined ",label:" SQL ",icon:"fa-solid fa-database "},FUNCTION:{css:" is-dark is-outlined ",label:" Function ",icon:" fa-brands fa-node-js "}};function ve(r){let e,t,s="Iniciar sesión",n,a,i,d,h="Nombre de usuario",w,b,o,_,m,g,k="Contraseña",N,E,p,M,A,x='<div class="control"><button class="button is-primary" type="submit">Iniciar sesión</button></div>',R,J;return{c(){e=c("div"),t=c("h1"),t.textContent=s,n=L(),a=c("form"),i=c("div"),d=c("label"),d.textContent=h,w=L(),b=c("div"),o=c("input"),_=L(),m=c("div"),g=c("label"),g.textContent=k,N=L(),E=c("div"),p=c("input"),M=L(),A=c("div"),A.innerHTML=x,this.h()},l(v){e=f(v,"DIV",{class:!0});var y=H(e);t=f(y,"H1",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1yeihy2"&&(t.textContent=s),n=j(y),a=f(y,"FORM",{class:!0});var T=H(a);i=f(T,"DIV",{class:!0});var O=H(i);d=f(O,"LABEL",{class:!0,"data-svelte-h":!0}),z(d)!=="svelte-1tq2mwz"&&(d.textContent=h),w=j(O),b=f(O,"DIV",{class:!0});var V=H(b);o=f(V,"INPUT",{class:!0,type:!0,placeholder:!0}),V.forEach(S),O.forEach(S),_=j(T),m=f(T,"DIV",{class:!0});var P=H(m);g=f(P,"LABEL",{class:!0,"data-svelte-h":!0}),z(g)!=="svelte-66z98u"&&(g.textContent=k),N=j(P),E=f(P,"DIV",{class:!0});var G=H(E);p=f(G,"INPUT",{class:!0,type:!0,placeholder:!0}),G.forEach(S),P.forEach(S),M=j(T),A=f(T,"DIV",{class:!0,"data-svelte-h":!0}),z(A)!=="svelte-u84jsi"&&(A.innerHTML=x),T.forEach(S),y.forEach(S),this.h()},h(){l(t,"class","title is-4"),l(d,"class","label"),l(o,"class","input"),l(o,"type","text"),l(o,"placeholder","Nombre de usuario"),o.required=!0,l(b,"class","control"),l(i,"class","field"),l(g,"class","label"),l(p,"class","input"),l(p,"type","password"),l(p,"placeholder","Contraseña"),p.required=!0,l(E,"class","control"),l(m,"class","field"),l(A,"class","field"),l(a,"class","form svelte-osrx57"),l(e,"class","container svelte-osrx57")},m(v,y){X(v,e,y),u(e,t),u(e,n),u(e,a),u(a,i),u(i,d),u(i,w),u(i,b),u(b,o),D(o,r[0]),u(a,_),u(a,m),u(m,g),u(m,N),u(m,E),u(E,p),D(p,r[1]),u(a,M),u(a,A),R||(J=[U(o,"input",r[3]),U(p,"input",r[4]),U(a,"submit",Y(r[2]))],R=!0)},p(v,[y]){y&1&&o.value!==v[0]&&D(o,v[0]),y&2&&p.value!==v[1]&&D(p,v[1])},i:Q,o:Q,d(v){v&&S(e),R=!1,Z(J)}}}function ye(r,e,t){const s=ee();let n="",a="",i=new I;function d(o){s("login",{login:o})}async function h(){try{let _=await(await i.post("/api/system/prd/system/login/0.01",{username:n,password:a})).json();console.log(_),_.login?(le.set(_),await _e(_.token),await pe(_.token)):alert("Credenciales inválidas"),d(_.login)}catch(o){console.trace(o),alert(o.message)}}te(()=>{});function w(){n=this.value,t(0,n)}function b(){a=this.value,t(1,a)}return[n,a,h,w,b]}class Ee extends se{constructor(e){super(),ae(this,e,ye,ve,W,{})}}export{Ee as L,de as a,ge as b,Ce as c,ce as d,fe as e,Ae as f,he as g,le as h,B as i,Se as j,_e as k,ue as l,I as u};
