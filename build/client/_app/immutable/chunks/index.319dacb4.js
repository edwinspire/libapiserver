import{S as ie,i as ne,s as se,k as c,q as P,a as I,l as d,m as f,r as z,h,c as L,n as o,b as re,D as r,L as U,M as J,N as oe,H as Z,O as ae,o as le}from"./index.6606cca4.js";var ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ue(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var j={exports:{}},te;function ce(){return te||(te=1,function(a,t){var e=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof ee<"u")return ee;throw new Error("unable to locate global object")},i=e();a.exports=t=i.fetch,i.fetch&&(t.default=i.fetch.bind(i)),t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response}(j,j.exports)),j.exports}const A=typeof window<"u"?window.fetch:ce().default;var de=class{constructor(t){this._redirect_in_unauthorized_internal=t,this._basic_authentication={}}SetBasicAuthentication(t,e){return t&&e?this._basic_authentication="Basic "+Buffer.from(t+":"+e).toString("base64"):this._basic_authentication=void 0,this}_addBasicAuthentication(t){return this._basic_authentication&&(t.Authorization=this._basic_authentication),t}async DELETE(t,e){return e.method="DELETE",this.request(t,e)}async GET(t,e){return e.method="GET",this.request(t,e)}async PUT(t,e){return e.method="PUT",this.request(t,e)}async POST(t,e){return e.method="POST",this.request(t,e)}async PATCH(t,e){return e.method="PATCH",this.request(t,e)}async request(t,e){console.log(e);let i=e.query,n=e.body,s,l={};e.headers||(e.headers={"Content-Type":"application/json"}),e.method||(e.method="GET"),e.method==="GET"||e.method==="HEAD"?l={method:e.method.toString().toUpperCase(),headers:e.headers}:l={method:e.method.toString().toUpperCase(),body:JSON.stringify(n),headers:e.headers},e.headers=this._addBasicAuthentication(e.headers);try{let u=new URLSearchParams(i),w=t+"?"+u.toString();return u.toString().length==0&&(w=t),s=await A(w,l),this._redirect_in_unauthorized&&s.status==401&&(window.location.href=this._redirect_in_unauthorized),s}catch(u){if(console.trace(u),s)return s;throw u}}async put(t,e,i){i||(i={"Content-Type":"application/json"}),i=this._addBasicAuthentication(i);try{let n=await A(t,{method:"PUT",body:JSON.stringify(e),headers:i});return this._redirect_in_unauthorized&&n.status==401&&(window.location.href=this._redirect_in_unauthorized),n}catch(n){throw console.log(n),n}}async delete(t,e,i){i||(i={"Content-Type":"application/json"}),i=this._addBasicAuthentication(i);try{let n=await A(t,{method:"DELETE",body:JSON.stringify(e),headers:i});return this._redirect_in_unauthorized&&n.status==401&&(window.location.href=this._redirect_in_unauthorized),n}catch(n){throw console.log(n),n}}async post(t,e,i){let n;i||(i={"Content-Type":"application/json"}),i=this._addBasicAuthentication(i);try{return n=await A(t,{method:"POST",body:JSON.stringify(e),headers:i}),this._redirect_in_unauthorized&&n.status==401&&(window.location.href=this._redirect_in_unauthorized),n}catch(s){if(console.log(s),n)return n;throw s}}async get(t,e,i){let n;i||(i={"Content-Type":"application/json"}),i=this._addBasicAuthentication(i);try{let s=new URLSearchParams(e),l=t+"?"+s.toString();return n=await A(l,{method:"GET",headers:i}),this._redirect_in_unauthorized&&n.status==401&&(window.location.href=this._redirect_in_unauthorized),n}catch(s){if(n)return n;throw s}}};const he=ue(de);function fe(a){let t,e,i,n,s,l,u,w,E,y,_,N,m,T,R,G,q,p,H,S,B,g,V,F,M;return{c(){t=c("div"),e=c("h1"),i=P("Iniciar sesión"),n=I(),s=c("form"),l=c("div"),u=c("label"),w=P("Nombre de usuario"),E=I(),y=c("div"),_=c("input"),N=I(),m=c("div"),T=c("label"),R=P("Contraseña"),G=I(),q=c("div"),p=c("input"),H=I(),S=c("div"),B=c("div"),g=c("button"),V=P("Iniciar sesión"),this.h()},l(v){t=d(v,"DIV",{class:!0});var b=f(t);e=d(b,"H1",{class:!0});var $=f(e);i=z($,"Iniciar sesión"),$.forEach(h),n=L(b),s=d(b,"FORM",{class:!0});var C=f(s);l=d(C,"DIV",{class:!0});var D=f(l);u=d(D,"LABEL",{class:!0});var k=f(u);w=z(k,"Nombre de usuario"),k.forEach(h),E=L(D),y=d(D,"DIV",{class:!0});var x=f(y);_=d(x,"INPUT",{class:!0,type:!0,placeholder:!0}),x.forEach(h),D.forEach(h),N=L(C),m=d(C,"DIV",{class:!0});var O=f(m);T=d(O,"LABEL",{class:!0});var K=f(T);R=z(K,"Contraseña"),K.forEach(h),G=L(O),q=d(O,"DIV",{class:!0});var Q=f(q);p=d(Q,"INPUT",{class:!0,type:!0,placeholder:!0}),Q.forEach(h),O.forEach(h),H=L(C),S=d(C,"DIV",{class:!0});var W=f(S);B=d(W,"DIV",{class:!0});var X=f(B);g=d(X,"BUTTON",{class:!0,type:!0});var Y=f(g);V=z(Y,"Iniciar sesión"),Y.forEach(h),X.forEach(h),W.forEach(h),C.forEach(h),b.forEach(h),this.h()},h(){o(e,"class","title is-4"),o(u,"class","label"),o(_,"class","input"),o(_,"type","text"),o(_,"placeholder","Nombre de usuario"),_.required=!0,o(y,"class","control"),o(l,"class","field"),o(T,"class","label"),o(p,"class","input"),o(p,"type","password"),o(p,"placeholder","Contraseña"),p.required=!0,o(q,"class","control"),o(m,"class","field"),o(g,"class","button is-primary"),o(g,"type","submit"),o(B,"class","control"),o(S,"class","field"),o(s,"class","form svelte-osrx57"),o(t,"class","container svelte-osrx57")},m(v,b){re(v,t,b),r(t,e),r(e,i),r(t,n),r(t,s),r(s,l),r(l,u),r(u,w),r(l,E),r(l,y),r(y,_),U(_,a[0]),r(s,N),r(s,m),r(m,T),r(T,R),r(m,G),r(m,q),r(q,p),U(p,a[1]),r(s,H),r(s,S),r(S,B),r(B,g),r(g,V),F||(M=[J(_,"input",a[3]),J(p,"input",a[4]),J(s,"submit",oe(a[2]))],F=!0)},p(v,[b]){b&1&&_.value!==v[0]&&U(_,v[0]),b&2&&p.value!==v[1]&&U(p,v[1])},i:Z,o:Z,d(v){v&&h(t),F=!1,ae(M)}}}function _e(a,t,e){let i="",n="",s=new he;async function l(){try{let y=await(await s.post("/api/login",{username:i,password:n})).json();console.log(y),y.login?alert("Inicio de sesión exitoso. Bienvenid@ "+y.first_name):alert("Credenciales inválidas")}catch(E){alert(E.message)}}le(()=>{});function u(){i=this.value,e(0,i)}function w(){n=this.value,e(1,n)}return[i,n,l,u,w]}class ve extends ie{constructor(t){super(),ne(this,t,_e,fe,se,{})}}export{ve as L};
